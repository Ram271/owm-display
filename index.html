<html>
<head>
	<title>Wassersportzentrum Wettertafel</title>
	<meta charset="utf-8">

	<script src="js/jquery-1.9.1.min.js" ></script>

	<script src="js/highcharts.js"></script>
	<script src="js/highcharts-more.js"></script>

	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

	<script src="js/charts.js"></script>
	<meta http-equiv="refresh" content="3600"> 
</head>

<body>
	<div class="row">
		<div class="span4">
			<div id="dial-wind" class="widget"></div>
		</div>

		<div class="span4 pos-rel">
			<div id="map-rain">
				<img src="http://www.dwd.de/wundk/radar/Radarfilm_WEB_SE.gif" id="map" />
				<img src="img/map-pin.png" id="pin" />
				<img src="img/map-mask.png" id="mask" />
				<h2>Niederschlagsradar</h2>
			</div>
			<div id="icon-weather"></div>
			<div id="dial-temperature"></div>
		</div>

		<div class="span4">
			<div id="dial-pressure" class="widget" ></div>
		</div>
	</div>

	<div class="row">
		<div class="span12">
			<div id="chart-pressure" class="widget"></div>
		</div>
	</div>

	<div class="row">
		<div class="span12">
			<div id="chart-temp" class="widget"></div>
		</div>
	</div>

	<div class="row">
		<div class="span12">
			<div id="chart-wind" class="widget"></div>
		</div>
	</div>

	<div class="row">
		<div class="span12">
			<div id="chart-rain" class="widget"></div>
		</div>
	</div>
	<div class="row">
		<div class="span12">
			<div id="license">
				All scalar data is courtesy of openweathermap.org, licensed under CC-BY-SA 2.0<br />
				Radar image is courtesy of dwd.de
			</div>
		</div>
	</div>
</body>

<script type="text/javascript">
var time_zone = 1000 * (new Date().getTimezoneOffset())*(-60);

jQuery(document).ready(function() {
	$.ajax({
		url: "http://openweathermap.org/data/2.1/forecast/city/?id=2853260&units=metric&callback=?",
		type: 'GET',
		dataType: 'jsonp',
		error: errorHandler,
		success: getForecast
	});

	$.ajax({
		url: "http://api.openweathermap.org/data/2.1/weather/city/2853260?type=json&units=metric&callback=?",
		type: 'GET',
		dataType: 'jsonp',
		error: errorHandler,
		success: getStation
	});

});



function getForecast(JSONobject)
{
	data = JSONobject.list;
	dialWind('dial-wind', data);
	plotPressure('chart-pressure', data);
	plotTemperature('chart-temp', data);
	plotWindSpeed('chart-wind', data);
	plotRain('chart-rain', data);

}

function getStation(JSONobject)
{
	data = JSONobject;
	placeIcon('icon-weather', data);
	dialPressure('dial-pressure', data);
	dialTemperature('dial-temperature', data);
}

function  errorHandler(e)
{
	console.log(e.status +' '+e.statusText);
}

</script>


</html>
